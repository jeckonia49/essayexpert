{% load static %}

<section class="w-full py-20">
  <div
    class="w-[100%] md:w-[500px] card flex items-start justify-start py-5 px-6 hover:shadow-none shadow-sm rounded-lg border border-1 border-blue-500"
  >
    <form class="w-full py-4 px-5 items-start flex flex-col">
      <h1 class="text-slate-500 font-semibold text-xl">
        Quick Price Calculator
      </h1>

      <hr class="w-full bg-gray-400 my-4" />

      <!-- level -->
      <div class="py-5 pt-2 block">
        <ul class="grid w-full gap-2 md:gap-6 grid-cols-1 md:grid-cols-2">
          <!-- level 1(High School) -->
          <li class="w-full col-span-1">
            <input
              placeholder=""
              title="level"
              type="radio"
              id="high-school"
              name="academic_level"
              value="High School"
              class="hidden peer"
            />
            <label
              for="academic_level"
              class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border border-gray-300 rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:text-blue-900 hover:bg-gray-500 delay-100 hover:text-white"
            >
              <div class="block w-full">
                <div class="w-full text-lg font-semibold px-3">High School</div>
              </div>
            </label>
          </li>
          
          <!-- level 2(College) -->
          <li class="w-full col-span-1">
            <input
              placeholder=""
              title="level"
              type="radio"
              id-="College"
              name="academic_level"
              value="College"
              class="hidden peer"
            />
            <label
              for="College"
              class="w-[100%] inline-flex items-center justify-between p-3 text-gray-500 bg-white border border-gray-300 rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:text-blue-900 hover:bg-gray-500 delay-100 hover:text-white"
            >
              <div class="block w-full">
                <div class="w-full text-lg font-semibold px-5 text-center">
                  College
                </div>
              </div>
            </label>
          </li>

          <!-- level 3(Undergraduate) -->
          <li class="w-full col-span-1">
            <input
              placeholder=""
              title="level"
              type="radio"
              id-="Undergraduate"
              name="academic_level"
              value="Undergraduate"
              class="hidden peer"
            />
            <label
              for="Undergraduate"
              class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border border-gray-300 rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:text-blue-900 hover:bg-gray-500 delay-100 hover:text-white"
            >
              <div class="block w-full">
                <div class="w-full text-lg font-semibold px-5 text-center">
                  Undergraduate
                </div>
              </div>
            </label>
          </li>

          <!-- level 4(Undergraduate) -->
          <li class="w-full col-span-1">
            <input
              placeholder=""
              title="level"
              type="radio"
              id-="Master-Phd"
              name="academic_level"
              value="Master_Phd"
              class="hidden peer"
            />
            <label
              for="Master/Phd"
              class="inline-flex items-center justify-between w-full p-3 text-gray-500 bg-white border border-gray-300 rounded-lg cursor-pointer peer-checked:border-blue-500 peer-checked:text-blue-900 hover:bg-gray-500 delay-100 hover:text-white"
            >
              <div class="block w-full">
                <div class="w-full text-lg font-semibold px-5 text-center">
                  Master/Phd
                </div>
              </div>
            </label>
          </li>
        </ul>
      </div>

      <!-- type of paper -->

      <hr class="w-full bg-gray-400 my-4" />
      <div class="w-full py-2 border-gray-400 border rounded-md flex">
        <select
          title="type_of_paper"
          name="type_of_paper"
          onchange="handleSelect(this.value)"
          data-te-select-init
          data-te-select-filter="true"
          class="appearance-none outline-none border-none form-select w-[100%] h-auto px-4 my-2 py-5 rounded-md placeholder:items-center flex justify-center placeholder:py-5"
        >
          <option value="option1" class="py-4 items-center justify-center flex">
            option1
          </option>
          <option value="option2" class="py-4 items-center justify-center flex">
            option2
          </option>
          <option value="option3" class="py-4 items-center justify-center flex">
            option3
          </option>
          <option value="option4" class="py-4 items-center justify-center flex">
            option4
          </option>
          <option value="option5" class="py-4 items-center justify-center flex">
            option5
          </option>
        </select>
      </div>

      <!-- pages -->

      <hr class="w-full bg-gray-400 my-4" />
      <div class="w-full flex items-center justify-between space-x-2">
        <!-- pages -->
        <div class="items-center flex justify-start space-x-1">
          <!-- add btn -->
          <button
            type="button"
            id="btnMinus"
            class="items-center flex justify-center bg-white shandow-md border rounded-lg hover:bg-gray-300 border-gray-400 py-4 px-7"
          >
            <img
              src="{% static 'assets/icons/minus.png' %}"
              alt="plus"
              class="text-xl font-bold text-gray-900 bg-contain"
            />
          </button>
          <!-- input value -->
          <button
            type="button"
            class="items-center flex justify-center bg-white shandow-md border rounded-lg hover:bg-gray-300 border-gray-400 py-3.5 px-5"
          >
            <p id="pages_display">1</p>
            <span class="pl-4">Pages</span>
          </button>
          <!-- minus btn -->
          <button
            type="button"
            id="btnAdd"
            class="items-center flex justify-center bg-white shandow-md border rounded-lg hover:bg-gray-300 border-gray-400 py-4 px-7"
          >
            <img
              src="{% static 'assets/icons/plus.png' %}"
              alt="plus"
              class="text-xl font-bold text-gray-900 bg-contain"
            />
          </button>
        </div>
        <!-- words -->
        <div
          class="w-1/3 items-center flex flex-col justify-center bg-gray-500 rounded-lg shadow-sm border-gray-300"
        >
          <p class="text-xl font-semibold py-1 px-1">Words:</p>
          <div id="words_display" class="text-white font-bold text-3xl italic">
            275
          </div>
        </div>
      </div>

      <!-- DURATION -->
      <hr class="w-full bg-gray-400 my-4" />

      <!--With new Date with 24h-->
      <div
        class="relative w-full py-3 px-1"
        id="timepicker-default-time-with-new-date-24h"
        data-te-input-wrapper-init
      >
        <input
          type="text"
          class="peer block min-h-[auto] w-full rounded border-0 bg-transparent px-3 py-[0.32rem] leading-[1.6] outline-none transition-all duration-200 ease-linear focus:placeholder:opacity-100 peer-focus:text-primary data-[te-input-state-active]:placeholder:opacity-100 motion-reduce:transition-none dark:text-neutral-200 dark:placeholder:text-neutral-200 dark:peer-focus:text-primary [&:not([data-te-input-placeholder-active])]:placeholder:opacity-0"
          id="form12"
        />
        <label
          for="form12"
          class="pointer-events-none absolute left-3 top-0 mb-0 max-w-[90%] origin-[0_0] truncate pt-[0.37rem] leading-[1.6] text-neutral-500 transition-all duration-200 ease-out peer-focus:-translate-y-[0.9rem] peer-focus:scale-[0.8] peer-focus:text-primary peer-data-[te-input-state-active]:-translate-y-[0.9rem] peer-data-[te-input-state-active]:scale-[0.8] motion-reduce:transition-none dark:text-neutral-200 dark:peer-focus:text-primary"
          >Choose duration</label
        >
      </div>

      <!-- PRICING -->
      <hr class="w-full bg-gray-400 my-4" />
      <div
        class="py-2 my-5 border border-gray-400 rounded-md shadow-sm w-full flex items-center justify-start"
      >
        <p class="px-6">Price:</p>
        <div class="flex items-center">
          <small>$: </small>
          <input
            title="price"
            value="1.34"
            id="price"
            class="w-full h-full text-justify outline-none border-none"
            disabled
          />
        </div>
      </div>
    </form>
  </div>
</section>

<script>
  // buttons increase in pages and words

  const btnAdd = document.getElementById('btnAdd')
  const minusBtn = document.getElementById('btnMinus')
  let price = document.getElementById('price')

  minusBtn.addEventListener('click', () => {
    let pagesDisplay = document.getElementById('pages_display')
    let wordsDisplay = document.getElementById('words_display')
    let priceValue = parseFloat(price.value)

    // prevent negative minus
    
    if (!(parseInt(pagesDisplay.innerHTML) < 2)) {
      pagesDisplay.textContent = parseInt(pagesDisplay.innerHTML) - 1
    } else return
    if (!(parseInt(wordsDisplay.innerHTML) < 550)) {
      wordsDisplay.textContent = parseInt(wordsDisplay.innerHTML) - 275
    } else return;
    if (!(parseFloat(priceValue) < 1.34)) {
      price.value = parseFloat(priceValue - 1.34).toFixed(2)
    }else return;
    return
    
    const pageCount = pagesDisplay.textContent
    const wordCount = wordsDisplay.textContent
  })

  btnAdd.addEventListener('click', function () {
    // fetch holder for page and words

    let pagesDisplay = document.getElementById('pages_display')
    let wordsDisplay = document.getElementById('words_display')
    let priceValue = parseFloat(price.value)
    
    pagesDisplay.textContent = parseInt(pagesDisplay.innerHTML) + 1;
    wordsDisplay.textContent = parseInt(wordsDisplay.innerHTML) + 275;
    price.value = parseFloat(priceValue + 1.34).toFixed(2)
    
    const pageCount = pagesDisplay.textContent
    const wordCount = wordsDisplay.textContent
    
    // console.log({
    //     pageCount,
    //     wordCount
    // });
  })

  const papertTypePricing = [
    {
        id:1,
        option:"option1",
        price:0.87
    },
    {
        id:2,
        option:"option2",
        price:1.15
    },
    {
        id:3,
        option:"option3",
        price:1.6
    },
]

  function handleSelect(e) {
    // for the calculation of the price
    let pagesDisplay = document.getElementById('pages_display');
    let wordsDisplay = document.getElementById('words_display');
    let priceValue = parseFloat(price.value)
    console.log(e)
    
    for(let i=0;i<papertTypePricing.length;i++){
        if(e === papertTypePricing[i].option){
            price.value  = parseFloat(priceValue+papertTypePricing[i].price).toFixed(2)
        }
    }

    console.log(pagesDisplay.innerHTML, parseFloat(priceValue).toFixed(2))
  }

  //Default time date 24h
  //   const pickerStartedWithDate24h = document.querySelector(
  //     '#timepicker-default-time-with-new-date-24h'
  //   )
  //   const tmStartedWithDate24h = new te.Timepicker(pickerStartedWithDate24h, {
  //     defaultTime: new Date(),
  //     format24: true
  //   })
</script>
